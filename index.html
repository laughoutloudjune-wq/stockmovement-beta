<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, viewport-fit=cover" />
  <title>Stock Inventory Web App (Beta)</title>
  <style>
    :root{
      --space-1:.5rem; --space-2:.75rem; --space-3:1rem; --space-4:1.25rem;
      --radius: 14px; --radius-pill: 9999px;
      --border-weak: rgba(0,0,0,.06);
      --border: rgba(0,0,0,.10);
      --bg:#eef1f6; --card: rgba(255,255,255,0.9); --text:#0b0b0d;
      --accent:#0a84ff; --accent-weak:#e5f0ff;
      --shadow-s: 0 2px 6px rgba(0,0,0,.06);
      --shadow-m: 0 6px 16px rgba(0,0,0,.10);
      --shadow-l: 0 12px 26px rgba(0,0,0,.12);
      --input-border: rgba(0,0,0,0.12);
      --input-shadow: 0 2px 8px rgba(0,0,0,.08);
    }
    *,*::before,*::after{ box-sizing:border-box }
    body{ margin:0; font-family:system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; color:#0d1117; background:linear-gradient(135deg,#eef1f6 0%,#e1e7f3 35%,#f5f7fb 65%,#e8ecf7 100%) fixed; }
    .container{ width:min(1100px, 96vw); margin: 2rem auto; display:flex; flex-direction:column; gap:1rem }
    .glass{ background: var(--card); border: 1px solid var(--border); border-radius: var(--radius);
      box-shadow: var(--shadow-m); backdrop-filter: saturate(160%) blur(10px); -webkit-backdrop-filter: saturate(160%) blur(10px); }
    header{ display:flex; align-items:center; gap:.5rem; padding: .75rem 1rem }
    .tabs{ display:flex; gap:.5rem; padding:.45rem; overflow:auto; border-radius:var(--radius-pill); background:#fff; border:1px solid var(--border); box-shadow: var(--shadow-s) }
    .tabs button{ padding:.6rem 1rem; border-radius:var(--radius-pill); border:1px solid transparent; background:transparent; font-weight:700; cursor:pointer }
    .tabs button.active{ background:#fff; border-color:var(--border); box-shadow: var(--shadow-s); color:#0a84ff }
    main{ min-height: 60vh; padding:1rem }
    .btn{ padding:.5rem .9rem; border-radius:999px; border:1px solid var(--border); background:#fff; box-shadow: var(--shadow-s); cursor:pointer; font-weight:700 }
    .btn.primary{ background:linear-gradient(145deg,#0a84ff,#4da3ff); color:#fff; border-color:transparent }
    .btn.small{ padding:.35rem .6rem; font-size:.85rem }
    .chip{ background:#eef2ff; border:1px solid #dfe6ff; border-radius:999px; padding:.15rem .55rem; font-weight:700 }
    .meta{ opacity:.6; font-size:.85rem }
    .tbl{ width:100%; border-collapse:collapse; font-size:.95rem }
    .tbl th, .tbl td{ padding:.5rem .6rem; border-bottom:1px solid rgba(0,0,0,.06) }
    .tbl thead th{ position:sticky; top:0; z-index:1; background:rgba(255,255,255,.95); backdrop-filter: blur(6px) }
    .toast{ position:fixed; left:50%; bottom:3rem; transform:translateX(-50%); background:#111; color:#fff; padding:.6rem 1rem; border-radius:999px; display:none; z-index:3000 }
    .toast.show{ display:block }
    /* modal + picker */
    #pickerOverlay{ position:fixed; inset:0; z-index:4000; display:none; align-items:center; justify-content:center; background:rgba(15,18,23,0.35); backdrop-filter: blur(3px); }
    #pickerOverlay.open{ display:flex }
    #pickerBox{ background:#fff; border:1px solid var(--border); border-radius:18px; box-shadow: var(--shadow-l); display:flex; flex-direction:column; width:100%; height:100%; overflow:hidden }
    .picker-header{ display:flex; gap:.5rem; align-items:center; padding:.75rem; border-bottom:1px solid var(--border-weak); background:#fff }
    .picker-list{ flex:1; overflow:auto; -webkit-overflow-scrolling:touch; padding:.6rem .75rem; display:flex; flex-direction:column; gap:.5rem; background:#fff }
    @media (min-width: 769px){ #pickerBox{ width:520px; height:70vh } }
    .list-btn{ width:100%; text-align:left; padding:.6rem .75rem; border:1px solid var(--border-weak); background:#fff; border-radius:10px; }
    .modal{ width:min(860px, 96vw); max-height:80vh; overflow:auto; border-radius:18px; padding:0 }
    .modal-hd{ padding:1rem 1.2rem; border-bottom:1px solid var(--border-weak); background:#fff; position:sticky; top:0 }
    .modal-bd{ padding:1rem 1.2rem; background:#fff }
    .modal-ft{ padding:.75rem 1.2rem; display:flex; gap:.5rem; justify-content:flex-end; border-top:1px solid var(--border-weak); background:#fff; position:sticky; bottom:0 }
    .grid2{ display:grid; grid-template-columns: repeat(2, minmax(0,1fr)); gap:.75rem }
    .filters input{ width:100%; padding:.5rem .65rem; border-radius:10px; border:1px solid var(--input-border); background:#fff; box-shadow: var(--input-shadow) }
    .glass-panel{ position:relative; z-index:0; background:linear-gradient(135deg, rgba(255,255,255,0.72), rgba(255,255,255,0.38)); border-radius:22px; border:1px solid rgba(255,255,255,0.5); box-shadow: 0 24px 45px rgba(15,23,42,0.15); backdrop-filter: blur(18px) saturate(160%); -webkit-backdrop-filter: blur(18px) saturate(160%); padding:1.35rem; overflow:hidden }
    .glass-panel::before{ content:""; position:absolute; inset:-30% 10% auto -25%; height:220px; background:radial-gradient(circle at top, rgba(255,255,255,0.8), rgba(255,255,255,0)); opacity:.85; transform:rotate(12deg); z-index:-1 }
    .glass-panel::after{ content:""; position:absolute; inset:-120px -20% auto 55%; height:260px; background:radial-gradient(circle at top, rgba(74,144,226,0.35), rgba(74,144,226,0)); z-index:-1; filter:blur(2px) }
    .glass-form{ display:flex; flex-direction:column; gap:1.25rem }
    .form-grid{ display:grid; gap:1.1rem; grid-template-columns:repeat(auto-fit,minmax(200px,1fr)) }
    .form-field{ display:flex; flex-direction:column; gap:.4rem; font-size:.9rem; font-weight:600; color:rgba(13,17,23,0.75) }
    .form-field span{ letter-spacing:.01em }
    .form-field input{ width:100%; padding:.75rem .9rem; border-radius:14px; border:1px solid rgba(255,255,255,0.65); background:rgba(255,255,255,0.65); box-shadow: inset 0 1px 0 rgba(255,255,255,0.6), 0 10px 24px rgba(13,17,23,0.1); font-size:1rem; transition:border .2s ease, box-shadow .2s ease, transform .15s ease }
    .form-field input:focus{ outline:none; border-color:rgba(10,132,255,0.7); box-shadow: inset 0 1px 0 rgba(255,255,255,0.7), 0 12px 28px rgba(10,132,255,0.28); transform:translateY(-1px) }
    .form-actions{ display:flex; flex-wrap:wrap; gap:.75rem; align-items:center; justify-content:flex-end }
    .purchase-stack{ display:grid; gap:1.5rem }
    .purchase-stack h2{ margin-top:0 }
    .purchase-summary{ display:flex; gap:1rem; flex-wrap:wrap; margin-bottom:.5rem; color:rgba(13,17,23,0.65); font-size:.9rem }
    .purchase-summary .chip{ background:rgba(255,255,255,0.65); border:1px solid rgba(10,132,255,0.2); box-shadow:0 6px 16px rgba(10,132,255,0.15) }
    .table-card{ padding:0 }
    .table-card header{ display:flex; align-items:center; justify-content:space-between; gap:1rem; padding:1.2rem 1.35rem 0 }
    .table-scroll{ padding:1.2rem 1.35rem 1.35rem; overflow:auto }
    .table-scroll table{ background:rgba(255,255,255,0.6); border-radius:16px; overflow:hidden }
    .tbl th, .tbl td{ backdrop-filter: blur(12px) }
    .status-pill{ display:inline-flex; align-items:center; gap:.35rem; padding:.25rem .65rem; border-radius:999px; font-size:.8rem; font-weight:700; text-transform:capitalize }
    .status-pill.pending{ background:rgba(255,193,7,0.16); color:#b78600; border:1px solid rgba(255,193,7,0.3) }
    .status-pill.approved{ background:rgba(52,199,89,0.18); color:#1e8b3d; border:1px solid rgba(52,199,89,0.32) }
    .status-pill.rejected{ background:rgba(255,59,48,0.18); color:#af1f18; border:1px solid rgba(255,59,48,0.32) }
    @media (min-width: 960px){ .purchase-stack{ grid-template-columns: minmax(0, 420px) minmax(0, 1fr); align-items:start } }
  </style>
  <script>
    // Set your BETA Apps Script Web App URL here
    // window.API_URL = "https://script.google.com/macros/s/AKfycbxQdBQQXnKOtfgQMxM3tdFPytu66CigJXL3n-bKybcmKbMSZ6lBp_Msd87_mEdxTyBZ/exec";
  </script>
</head>
<body>
  <div class="container">
    <header class="glass">
      <div style="margin-left:auto; display:flex; gap:.5rem">
        <button id="lang-th" class="btn small">ไทย</button>
        <button id="lang-en" class="btn small">EN</button>
        <button id="refreshDataBtn" class="btn small">↻</button>
      </div>
    </header>

    <div class="tabs glass" id="tabs">
      <button data-tab="dashboard" class="active" type="button">สรุป</button>
      <button data-tab="out" type="button">จ่ายออก</button>
      <button data-tab="in" type="button">รับเข้า</button>
      <button data-tab="adjust" type="button">ปรับปรุง</button>
      <button data-tab="purchase" type="button">ขอจัดซื้อ</button>
    </div>

    <main id="view" class="glass"></main>
  </div>

  <div id="toast" class="toast" role="status" aria-live="polite"></div>

  <!-- Picker -->
  <div id="pickerOverlay" aria-hidden="true">
    <div id="pickerBox" role="dialog" aria-modal="true">
      <div class="picker-header">
        <input id="pickerSearch" placeholder="ค้นหา…" inputmode="search" />
        <button class="btn" id="pickerCancel" type="button">ปิด</button>
      </div>
      <div class="picker-list" id="pickerList"></div>
      <div class="picker-actions" style="padding:.5rem .75rem; border-top:1px solid var(--border-weak)">
        <button class="btn" id="pickerAdd" type="button" title="เพิ่มใหม่" style="display:none">เพิ่ม “<span id="pickerAddText"></span>”</button>
      </div>
    </div>
  </div>

  <script type="module" src="./js/main.js"></script>
</body>
</html>
