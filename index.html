<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1, viewport-fit=cover, user-scalable=no" />
  <title>ระบบสต็อกวัสดุ</title>
  <link rel="icon" type="image/png" sizes="32x32" href="favicon.png">
  <link rel="apple-touch-icon" href="apple-touch-icon.png">
  <style>
    :root{
      --fs-xs: clamp(0.78rem, 1.3vw, 0.9rem);
      --fs-sm: clamp(0.95rem, 1.6vw, 1.05rem);
      --fs-md: clamp(1.05rem, 2vw, 1.2rem);
      --fs-lg: clamp(1.2rem, 2.4vw, 1.4rem);
      --space-1:.5rem; --space-2:.75rem; --space-3:1rem; --space-4:1.25rem;
      --radius: 14px; --radius-pill: 9999px;
      --border-weak: rgba(0,0,0,.06);
      --border: rgba(0,0,0,.10);
      --bg:#eef1f6; --card: rgba(255,255,255,0.9); --text:#0b0b0d;
      --accent:#0a84ff; --accent-weak:#e5f0ff;
      --shadow-s: 0 2px 6px rgba(0,0,0,.06);
      --shadow-m: 0 6px 16px rgba(0,0,0,.10);
      --shadow-l: 0 12px 26px rgba(0,0,0,.12);
      --container-max: 72rem; --pad-x: max(4vw, 1rem);

      --input-bg: #ffffff;
      --input-border: rgba(0,0,0,0.12);
      --input-shadow: 0 2px 8px rgba(0,0,0,.08);
      --input-shadow-focus: 0 6px 18px rgba(10,132,255,.20);
      --section-grad: linear-gradient(135deg, rgba(10,132,255,.10), rgba(255,255,255,.00));
    }
    *,*::before,*::after{ box-sizing:border-box }
    html{ height:100%; font-size:16px; -webkit-text-size-adjust:100% }
    body{
      min-height:100dvh; margin:0;
      font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Helvetica,Arial,sans-serif;
      background:
        radial-gradient(1200px 800px at 10% -10%, #eaf2ff 0%, transparent 60%),
        radial-gradient(1000px 700px at 110% 10%, #fff2e6 0%, transparent 55%),
        linear-gradient(180deg,#f7f9ff 0%, #eef1f6 100%);
      color:var(--text);
      -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale;
    }
    .container{
      position:relative; z-index:1; width:min(100%, 28rem); margin:0 auto;
      padding: calc(env(safe-area-inset-top) + var(--space-3)) var(--pad-x) var(--space-2);
      display:flex; flex-direction:column; gap:var(--space-3)
    }
    @media (min-width: 48rem){ .container{ width:min(100%, var(--container-max)) } }

    .glass{
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow-m);
      backdrop-filter: saturate(160%) blur(12px);
      -webkit-backdrop-filter: saturate(160%) blur(12px);
      background-image: var(--section-grad);
      background-blend-mode: screen;
    }

    header{ display:flex; align-items:center; gap:var(--space-2) }
    .spacer{ flex:1 }
    .lang{ display:flex; gap:.5rem; align-items:center }
    .lang button{
      padding:.5rem 1rem; border-radius:var(--radius-pill); border:1px solid rgba(0,0,0,.08);
      background:#fff; color:#111; font-weight:800; font-size:var(--fs-sm); cursor:pointer;
      box-shadow: var(--shadow-s);
      transition: transform .18s ease, background .18s ease, color .18s ease, box-shadow .18s ease;
    }
    .lang button:hover{ transform: translateY(-1px); background:#fffefc; box-shadow: var(--shadow-m) }
    .lang button.active{
      background:linear-gradient(145deg,#0a84ff,#4da3ff);
      color:#fff; border-color:transparent;
      box-shadow: 0 6px 14px rgba(10,132,255,.25), inset 0 0 0 1px rgba(255,255,255,.2)
    }

    .tabs{
      display:flex; gap:.5rem; padding:.45rem; overflow:auto;
      border-radius:var(--radius-pill);
      background:rgba(255,255,255,0.9);
      border:1px solid var(--border);
      -webkit-overflow-scrolling:touch;
      box-shadow: var(--shadow-s);
    }
    .tabs button{
      flex:0 0 auto; white-space:nowrap; padding:.65rem 1rem; border:none;
      border-radius:var(--radius-pill); background:transparent; cursor:pointer; font-weight:900;
      color:#1e1e20; font-size:var(--fs-sm);
      transition: transform .18s ease, background .18s ease, color .18s ease, box-shadow .18s ease;
    }
    .tabs button:hover{ background:#fff; transform:translateY(-1px); box-shadow: var(--shadow-s) }
    .tabs button.active{ background:#fff; color:#0a84ff; box-shadow: var(--shadow-m) }

    .card{ padding:var(--space-3); display:flex; flex-direction:column; gap:var(--space-3) }
    .card h3{ margin:0; font-size:var(--fs-md); font-weight:900; letter-spacing:.2px }

    /* Dashboard grid */
    .dashboard-grid{ display:grid; gap:1rem; grid-template-columns: 1fr; }
    @media (min-width: 48rem){ .dashboard-grid{ grid-template-columns: 1fr 1fr; } }
    @media (min-width: 75rem){ .dashboard-grid{ grid-template-columns: 2fr 1fr 1fr; } .span-2{ grid-column: span 2; } }

    .row{ display:flex; flex-wrap:wrap; gap:var(--space-3) }
    .row > *{ flex:1 1 14rem }
    label{ font-size:var(--fs-xs); color:#2e3a48; font-weight:800; letter-spacing:.15px }

    input,select,textarea{
      width:100%; padding:1rem 1.05rem; font-size:16px; background: var(--input-bg);
      color:#111; border:1px solid var(--input-border); border-radius: 14px; outline:none;
      box-shadow: var(--input-shadow);
      transition: box-shadow .18s ease, border-color .18s ease, transform .06s ease, background .18s ease;
    }
    input:hover,select:hover,textarea:hover{ background: #ffffff }
    input:focus,select:focus,textarea:focus{
      border-color:#0a84ff; box-shadow: var(--input-shadow-focus), 0 0 0 .25rem var(--accent-weak);
      transform: translateY(-0.5px);
    }
    input[type="date"]{ -webkit-appearance: none; appearance: none; min-width: 12.5rem; max-width: 100%; background-color:#fff; }

    .lines{ display:flex; flex-direction:column; gap:.75rem }
    .line{ display:flex; flex-direction:column; gap:.65rem; padding:.85rem; border:1px dashed var(--border-weak); border-radius:14px; background:#fff; box-shadow: var(--shadow-s); }
    .line .grid{ display:flex; flex-wrap:wrap; gap:.75rem }
    .line .grid > *{ flex:1 1 10rem }

    .list{ display:flex; flex-direction:column; gap:.6rem }
    .rowitem{
      display:flex; justify-content:space-between; align-items:center; gap:.75rem;
      padding:.75rem 1rem; border:1px solid var(--border); border-radius:14px; background:#fff; font-size:var(--fs-sm);
      box-shadow: var(--shadow-s);
    }
    .rowitem .meta{ color:#556070; font-size:var(--fs-xs) }

    .toggle{ display:flex; justify-content:flex-end }
    .toggle button{
      border:none; background:transparent; color:#0a84ff; font-weight:900; cursor:pointer; padding:.4rem .6rem;
      border-radius: var(--radius-pill); transition: background .18s, transform .18s;
    }
    .toggle button:hover{ background:rgba(10,132,255,.12); transform: translateY(-1px) }

    .badge{ display:inline-flex; align-items:center; justify-content:center; min-width:2rem; height:2rem; padding:0 .5rem; border-radius:var(--radius-pill); font-size:.95rem; font-weight:900; color:#fff; background:#7b8794; box-shadow: inset 0 -1px 0 rgba(255,255,255,.3); }
    .badge.red{ background:#ef4444 } .badge.yellow{ background:#f59e0b } .badge.green{ background:#10b981 }

    .btn{
      appearance:none; cursor:pointer; font-weight:900; font-size:var(--fs-sm);
      padding:.9rem 1.1rem; border-radius:var(--radius-pill); border:1px solid var(--border);
      background:#fff; color:#111; box-shadow: 0 6px 14px rgba(0,0,0,.10); -webkit-tap-highlight-color:transparent; touch-action:manipulation;
      transition: transform .18s ease, box-shadow .18s ease, background .18s ease, opacity .18s ease;
      position: relative;
    }
    .btn:hover{ background:#fffefc; transform:translateY(-1px); box-shadow: var(--shadow-m) }
    .btn.primary{ color:#fff; border-color:transparent; background:linear-gradient(145deg,#0a84ff,#4da3ff); box-shadow:0 6px 14px rgba(10,132,255,.28), inset 0 0 0 1px rgba(255,255,255,.2) }
    .btn.small{ padding:.55rem .9rem; font-size:var(--fs-xs); font-weight:800; background:#fff }
    .btn:disabled{ opacity:.45; cursor:not-allowed }
    .btn .btn-spinner{ position:absolute; inset:0; display:none; align-items:center; justify-content:center; }
    .btn.is-loading .btn-spinner{ display:flex } .btn.is-loading .btn-label{ visibility:hidden }
    .spinner{ width:18px; height:18px; border:2px solid rgba(0,0,0,.14); border-top-color:#0a84ff; border-radius:50%; animation: spin .9s linear infinite; }
    .btn.primary .spinner{ border-color: rgba(255,255,255,.35); border-top-color:#fff }
    @keyframes spin { to { transform: rotate(360deg) } }

    .skeleton-row{ display:flex; justify-content:space-between; align-items:center; gap:.75rem; padding:.75rem 1rem; border-radius:14px; border:1px solid var(--border-weak); background:#f5f7fb; box-shadow: var(--shadow-s); animation: pulse 1.2s ease-in-out infinite; min-height: 52px; }
    .skeleton-bar{ height:12px; width:50%; border-radius:8px; background:#e7ebf5 }
    .skeleton-badge{ width:36px; height:20px; border-radius:9999px; background:#e7ebf5 }
    @keyframes pulse { 0% { opacity:.7; } 50% { opacity:1; } 100% { opacity:.7; } }
    @media (prefers-reduced-motion: reduce){ .spinner, .skeleton-row{ animation: none } }

    /* Speed-Dial FAB (OUT tab) */
    .fab{
      position: fixed; right: 1rem; bottom: calc(env(safe-area-inset-bottom) + 1rem);
      z-index: 60; display:flex; flex-direction:column; align-items:flex-end; gap:.5rem;
    }
    .fab .mini{
      display:flex; align-items:center; gap:.5rem; transform: translateY(8px); opacity:0; pointer-events:none;
      transition: transform .18s ease, opacity .18s ease;
    }
    .fab.expanded .mini{ transform: translateY(0); opacity:1; pointer-events:auto; }
    .fab .label{
      background:#fff; border:1px solid var(--border); border-radius: var(--radius-pill); padding:.45rem .7rem; font-size:var(--fs-xs); font-weight:800; box-shadow: var(--shadow-s);
    }
    .fab .mini .btn.small{ box-shadow: var(--shadow-m); }
    .fab-main{
      width:56px; height:56px; border-radius: 50%; display:grid; place-items:center;
      background:linear-gradient(145deg,#0a84ff,#4da3ff); color:#fff; border:none; box-shadow: var(--shadow-l);
      cursor:pointer;
    }
    .fab-main .icon{ font-size: 22px; line-height: 1; transform: rotate(0deg); transition: transform .18s ease }
    .fab.expanded .fab-main .icon{ transform: rotate(45deg) } /* turns + into × look */
    .toast{ position:fixed; left:50%; bottom:calc(env(safe-area-inset-bottom) + 4.6rem); transform:translateX(-50%); background:#111; color:#fff; padding:.7rem 1rem; border-radius:var(--radius-pill); display:none; z-index:2500; font-size:var(--fs-sm); box-shadow: var(--shadow-m) }
    .toast.show{ display:block }

    /* Picker overlay */
    #pickerOverlay{ position:fixed; inset:0; z-index:2000; display:none; align-items:center; justify-content:center; background:rgba(15,18,23,0.15); backdrop-filter: blur(2px); -webkit-backdrop-filter: blur(2px); pointer-events:none; }
    #pickerOverlay.open{ display:flex; pointer-events:auto; }
    #pickerBox{ background:rgba(255,255,255,.98); border:1px solid var(--border); border-radius:18px; box-shadow: var(--shadow-l); display:flex; flex-direction:column; width:100%; height:100%; overflow:hidden; }
    .picker-header{ display:flex; gap:.5rem; align-items:center; padding:.75rem; border-bottom:1px solid var(--border-weak); background:#fff }
    .picker-header input{ flex:1; padding:1rem 1.05rem; font-size:16px; border:1px solid var(--input-border); border-radius:14px; outline:none; background:var(--input-bg); box-shadow:var(--input-shadow) }
    .picker-header input:focus{ border-color:#0a84ff; box-shadow: var(--input-shadow-focus), 0 0 0 .25rem var(--accent-weak) }
    .picker-list{ flex:1; overflow:auto; -webkit-overflow-scrolling:touch; padding:.6rem .75rem; display:flex; flex-direction:column; gap:.5rem; background:#fff }
    .pick-row{ padding:.95rem 1rem; font-size:1.02rem; line-height:1.25; border:1px solid var(--border); border-radius:14px; background:#fff; word-break:break-word; box-shadow: var(--shadow-s) }
    .picker-actions{ border-top:1px solid var(--border-weak); padding:.6rem .75rem; background:#fff; display:flex; gap:.5rem }

    @media (min-width: 769px){ #pickerBox{ width:520px; height:70vh } }
  </style>
</head>
<body>
<div class="container">
  <header>
    <!-- Header text removed as requested -->
    <div class="spacer"></div>
    <div class="lang">
      <button id="lang-th" class="active" type="button">ไทย</button>
      <button id="lang-en" type="button">EN</button>
      <button id="refreshDataBtn" class="btn small" type="button" style="margin-left:.5rem">
        <span class="btn-label">↻</span>
        <span class="btn-spinner"><span class="spinner"></span></span>
      </button>
    </div>
  </header>

  <div class="tabs glass" id="tabs">
    <button data-tab="dashboard" class="active" type="button">สรุป</button>
    <button data-tab="out" type="button">จ่ายออก</button>
    <button data-tab="in" type="button">รับเข้า</button>
    <button data-tab="adjust" type="button">ปรับปรุง</button>
    <button data-tab="purchase" type="button">ขอจัดซื้อ</button>
  </div>

  <main id="view" aria-live="polite"></main>
</div>

<div id="toast" class="toast" role="status" aria-live="polite"></div>

<!-- Picker -->
<div id="pickerOverlay" aria-hidden="true">
  <div id="pickerBox" role="dialog" aria-modal="true">
    <div class="picker-header">
      <input id="pickerSearch" placeholder="ค้นหา…" inputmode="search" />
      <button class="btn" id="pickerCancel" type="button">ปิด</button>
    </div>
    <div class="picker-list" id="pickerList"></div>
    <div class="picker-actions">
      <button class="btn" id="pickerAdd" type="button" title="เพิ่มใหม่">เพิ่ม “<span id="pickerAddText"></span>”</button>
    </div>
  </div>
</div>

<script type="module" src="./js/main.js"></script>
</body>
</html>
